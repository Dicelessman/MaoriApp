<!-- Modali condivisi per tutte le pagine -->

<!-- Modale Selezione Staff -->
<div id="staffSelectionModal" class="modal" role="dialog" aria-labelledby="staffSelectionModalTitle" aria-modal="true">
  <div class="modal-content max-w-lg mx-auto">
    <h4 id="staffSelectionModalTitle" class="text-xl font-semibold text-gray-700">Seleziona un membro dello Staff</h4>
    <p class="text-gray-600 mb-4">Seleziona uno staff per abilitare le modifiche.</p>
    <div id="staffListForSelection" class="space-y-2" role="listbox"></div>
  </div>
</div>

<!-- Modale Modifica Staff -->
<div id="editStaffModal" class="modal" role="dialog" aria-labelledby="editStaffModalTitle" aria-modal="true">
  <div class="modal-content max-w-sm mx-auto">
    <h4 id="editStaffModalTitle" class="text-xl font-semibold text-gray-700">Modifica Membro Staff</h4>
    <form id="editStaffForm" class="space-y-4">
      <input type="hidden" id="editStaffId" />
      <div>
        <label for="editStaffNome" class="block text-sm font-medium text-gray-700">Nome</label>
        <input id="editStaffNome" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200" />
      </div>
      <div>
        <label for="editStaffCognome" class="block text-sm font-medium text-gray-700">Cognome</label>
        <input id="editStaffCognome" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200" />
      </div>
      <div>
        <label for="editStaffEmail" class="block text-sm font-medium text-gray-700">Email</label>
        <input id="editStaffEmail" type="email" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200" />
      </div>
      <div class="flex gap-2 justify-end">
        <button type="button" onclick="window.UI.closeModal('editStaffModal')" class="btn-secondary" aria-label="Annulla modifica staff">Annulla</button>
        <button type="submit" class="btn-primary" aria-label="Salva modifiche staff">Salva</button>
      </div>
    </form>
  </div>
</div>

<!-- Modale Conferma Eliminazione Staff -->
<div id="confirmDeleteStaffModal" class="modal" role="dialog" aria-labelledby="confirmDeleteStaffModalTitle" aria-modal="true">
  <div class="modal-content max-w-sm mx-auto text-center">
    <h4 id="confirmDeleteStaffModalTitle" class="text-xl font-semibold text-gray-700">Conferma Eliminazione Staff</h4>
    <p class="text-gray-600 mb-4">Eliminare <span id="staffNameToDelete" class="font-semibold text-red-600"></span>?</p>
    <div class="flex gap-2 justify-center">
      <button onclick="window.UI.closeModal('confirmDeleteStaffModal')" class="btn-secondary" aria-label="Annulla eliminazione staff">Annulla</button>
      <button id="confirmDeleteStaffButton" class="btn-danger" aria-label="Conferma eliminazione staff">Elimina</button>
    </div>
  </div>
</div>

<!-- Modale Modifica Esploratore -->
<div id="editScoutModal" class="modal" role="dialog" aria-labelledby="editScoutModalTitle" aria-modal="true">
  <div class="modal-content max-w-sm mx-auto">
    <h4 id="editScoutModalTitle" class="text-xl font-semibold text-gray-700">Modifica Esploratore</h4>
    <form id="editScoutForm" class="space-y-4">
      <input type="hidden" id="editScoutId" />
      <div>
        <label for="editScoutNome" class="block text-sm font-medium text-gray-700">Nome</label>
        <input id="editScoutNome" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200" />
      </div>
      <div>
        <label for="editScoutCognome" class="block text-sm font-medium text-gray-700">Cognome</label>
        <input id="editScoutCognome" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200" />
      </div>
      <div class="flex gap-2 justify-end">
        <button type="button" onclick="window.UI.closeModal('editScoutModal')" class="btn-secondary" aria-label="Annulla modifica esploratore">Annulla</button>
        <button type="submit" class="btn-primary" aria-label="Salva modifiche esploratore">Salva</button>
      </div>
    </form>
  </div>
</div>

<!-- Modale Conferma Eliminazione Esploratore -->
<div id="confirmDeleteScoutModal" class="modal" role="dialog" aria-labelledby="confirmDeleteScoutModalTitle" aria-modal="true">
  <div class="modal-content max-w-sm mx-auto text-center">
    <h4 id="confirmDeleteScoutModalTitle" class="text-xl font-semibold text-gray-700">Conferma Eliminazione Esploratore</h4>
    <p class="text-gray-600 mb-4">Eliminare <span id="scoutNameToDelete" class="font-semibold text-red-600"></span>? Verranno rimosse anche le presenze associate.</p>
    <div class="flex gap-2 justify-center">
      <button onclick="window.UI.closeModal('confirmDeleteScoutModal')" class="btn-secondary" aria-label="Annulla eliminazione esploratore">Annulla</button>
      <button id="confirmDeleteScoutButton" class="btn-danger" aria-label="Conferma eliminazione esploratore">Elimina</button>
    </div>
  </div>
</div>

<!-- Modale Modifica Attività -->
<div id="editActivityModal" class="modal" role="dialog" aria-labelledby="editActivityModalTitle" aria-modal="true">
  <div class="modal-content max-w-sm mx-auto">
    <h4 id="editActivityModalTitle" class="text-xl font-semibold text-gray-700">Modifica Attività</h4>
    <form id="editActivityForm" class="space-y-4">
      <input type="hidden" id="editActivityId" />
      <div>
        <label for="editActivityTipo" class="block text-sm font-medium text-gray-700">Tipo</label>
        <select id="editActivityTipo" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200">
          <option value="Riunione">Riunione</option>
          <option value="Attività lunga">Attività lunga</option>
          <option value="Uscita">Uscita</option>
          <option value="Campo">Campo</option>
        </select>
      </div>
      <div>
        <label for="editActivityData" class="block text-sm font-medium text-gray-700">Data</label>
        <input id="editActivityData" type="date" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200" />
      </div>
      <div>
        <label for="editActivityDescrizione" class="block text-sm font-medium text-gray-700">Descrizione</label>
        <input id="editActivityDescrizione" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200" />
      </div>
      <div>
        <label for="editActivityCosto" class="block text-sm font-medium text-gray-700">Costo (€)</label>
        <input id="editActivityCosto" type="number" min="0" step="0.01" placeholder="0" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200" />
      </div>
      <div class="flex gap-2 justify-end">
        <button type="button" onclick="window.UI.closeModal('editActivityModal')" class="btn-secondary" aria-label="Annulla modifica attività">Annulla</button>
        <button type="submit" class="btn-primary" aria-label="Salva modifiche attività">Salva</button>
      </div>
    </form>
  </div>
</div>

<!-- Modale Conferma Eliminazione Attività -->
<div id="confirmDeleteActivityModal" class="modal" role="dialog" aria-labelledby="confirmDeleteActivityModalTitle" aria-modal="true">
  <div class="modal-content max-w-sm mx-auto text-center">
    <h4 id="confirmDeleteActivityModalTitle" class="text-xl font-semibold text-gray-700">Conferma Eliminazione Attività</h4>
    <p class="text-gray-600 mb-4">Eliminare <span id="activityInfoToDelete" class="font-semibold text-red-600"></span>?</p>
    <div class="flex gap-2 justify-center">
      <button onclick="window.UI.closeModal('confirmDeleteActivityModal')" class="btn-secondary" aria-label="Annulla eliminazione attività">Annulla</button>
      <button id="confirmDeleteActivityButton" class="btn-danger" aria-label="Conferma eliminazione attività">Elimina</button>
    </div>
  </div>
</div>

<!-- Modale Dettaglio Attività -->
<div id="activityDetailModal" class="modal" role="dialog" aria-labelledby="activityDetailTitle" aria-modal="true">
  <div class="modal-content max-w-2xl mx-auto">
    <div class="flex justify-between items-center mb-4">
      <h4 id="activityDetailTitle" class="text-xl font-semibold text-gray-700"></h4>
      <button onclick="window.UI.closeModal('activityDetailModal')" class="text-gray-400 hover:text-gray-600 text-2xl leading-none" aria-label="Chiudi modale dettaglio attività">&times;</button>
    </div>
    <p id="activityDetailMeta" class="text-gray-600 mb-4"></p>
    
    <div class="flex flex-wrap gap-2 mb-5">
      <button id="copyPresentiModalBtn" class="btn-primary" aria-label="Copia elenco presenti negli appunti">Copia Presenti</button>
      <button id="copyAssentiModalBtn" class="btn-secondary" aria-label="Copia elenco assenti negli appunti">Copia Assenti</button>
      <button id="copyPagamentiModalBtn" class="btn-secondary" aria-label="Copia elenco pagamenti negli appunti">Copia Pagamenti</button>
    </div>

    <div class="grid md:grid-cols-2 gap-6 mb-6">
      <div class="bg-gray-50 rounded-lg border border-gray-200 p-4">
        <div class="flex items-baseline justify-between mb-2">
          <h3 class="text-lg font-semibold text-gray-700">Presenti</h3>
          <span id="presentiModalCount" class="text-sm text-gray-500"></span>
        </div>
        <ul id="presentiModalList" class="list-disc pl-5 text-gray-800 space-y-1"></ul>
      </div>
      <div class="bg-gray-50 rounded-lg border border-gray-200 p-4">
        <div class="flex items-baseline justify-between mb-2">
          <h3 class="text-lg font-semibold text-gray-700">Assenti</h3>
          <span id="assentiModalCount" class="text-sm text-gray-500"></span>
        </div>
        <ul id="assentiModalList" class="list-disc pl-5 text-gray-800 space-y-1"></ul>
      </div>
    </div>

    <div class="bg-gray-50 rounded-lg border border-gray-200 p-4">
      <div class="flex items-baseline justify-between mb-2">
        <h3 class="text-lg font-semibold text-gray-700">Pagamenti</h3>
        <span id="pagamentiModalCount" class="text-sm text-gray-500"></span>
      </div>
      <ul id="pagamentiModalList" class="list-disc pl-5 text-gray-800 space-y-1"></ul>
    </div>

    <div class="flex gap-2 justify-end mt-6">
      <button onclick="window.UI.closeModal('activityDetailModal')" class="btn-secondary" aria-label="Chiudi modale dettaglio attività">Chiudi</button>
    </div>
  </div>
</div>

<!-- Modale Login -->
<div id="loginModal" class="modal show" role="dialog" aria-labelledby="loginModalTitle" aria-modal="true">
  <div class="modal-content max-w-sm mx-auto">
    <h4 id="loginModalTitle" class="text-xl font-semibold text-gray-700">Accedi all'App</h4>
    <form id="loginForm" class="space-y-4">
      <div>
        <label for="loginEmail" class="block text-sm font-medium text-gray-700">Email</label>
        <input id="loginEmail" type="email" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200" />
      </div>
      <div>
        <label for="loginPassword" class="block text-sm font-medium text-gray-700">Password</label>
        <input id="loginPassword" type="password" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-200" />
      </div>
      <button type="submit" class="btn-primary w-full">Accedi</button>
      <p id="loginError" class="text-red-500 text-sm text-center"></p>
    </form>
  </div>
</div>

<!-- Modale Conferma Generico -->
<div id="confirmModal" class="modal" role="dialog" aria-labelledby="confirmModalTitle" aria-modal="true">
  <div class="modal-content max-w-md mx-auto">
    <h4 id="confirmModalTitle" class="text-xl font-semibold text-gray-700 mb-3"></h4>
    <p id="confirmModalMessage" class="text-gray-600 mb-6"></p>
    <div class="flex gap-3 justify-end">
      <button id="confirmModalCancel" type="button" class="btn-secondary" aria-label="Annulla operazione">Annulla</button>
      <button id="confirmModalConfirm" type="button" class="btn-danger" aria-label="Conferma operazione">Conferma</button>
    </div>
  </div>
</div>