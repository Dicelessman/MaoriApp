<!-- Skip Links per accessibilitÃ  -->
<a href="#main-content" class="skip-link">Salta al contenuto principale</a>

<!-- Header condiviso -->
<header class="bg-green-700 text-white p-2 rounded-t-xl flex justify-between items-center" role="banner">
    <div class="flex flex-col">
      <h1 class="text-xl font-bold">Reparto Maori</h1>
      <p class="text-green-200 text-sm mt-0.5">Presenze</p>
    </div>
    <div id="staff-info" class="text-right flex flex-col" aria-live="polite" aria-atomic="true">
      <span class="text-green-200 text-sm">Sei:</span>
      <span id="selectedStaffName" class="font-semibold text-lg">Nessuno</span>
    </div>
    <div class="flex items-center gap-2">
      <button id="themeToggle" class="theme-toggle" title="Cambia tema" aria-label="Cambia tema tra chiaro e scuro" aria-pressed="false">
        <span class="theme-toggle-icon" aria-hidden="true">ğŸŒ™</span>
      </button>
      <span id="connectionStatus" class="text-xs px-2 py-1 rounded-full bg-green-800/50 hidden" role="status" aria-live="polite" title="Stato connessione">
        <span id="connectionStatusText">Online</span>
      </span>
      <!-- Notifiche In-App -->
      <div id="notificationsContainer" class="relative" style="display: none;">
        <button id="notificationsBell" class="relative p-2 text-white hover:bg-green-800 rounded-full focus:outline-none focus:ring-2 focus:ring-white" aria-label="Notifiche" aria-expanded="false" aria-haspopup="true">
          <span class="text-2xl">ğŸ””</span>
          <span id="notificationsBadge" class="absolute top-0 right-0 bg-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold" style="display: none;">0</span>
        </button>
        <div id="notificationsDropdown" class="absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 max-h-96 overflow-y-auto" style="display: none;" role="menu">
          <div class="p-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
            <h3 class="font-semibold text-gray-700 dark:text-gray-300">Notifiche</h3>
            <button id="markAllReadBtn" class="text-sm text-blue-600 dark:text-blue-400 hover:underline" aria-label="Segna tutte come lette">Segna tutte lette</button>
          </div>
          <div id="notificationsList" class="divide-y divide-gray-200 dark:divide-gray-700">
            <!-- Notifiche verranno inserite qui dinamicamente -->
          </div>
          <div id="notificationsEmpty" class="p-4 text-center text-gray-500 dark:text-gray-400 text-sm">
            Nessuna notifica
          </div>
        </div>
      </div>
      <span id="loggedInUserEmail" class="text-white text-lg" aria-label="Email utente loggato"></span>
      <nav id="hamburgerMenu" class="md:hidden" aria-label="Menu di navigazione mobile">
        <button class="hamburger-icon text-white p-3" aria-label="Apri menu di navigazione" aria-expanded="false" aria-controls="hamburgerMenuLinks">&#9776;</button>
        <div id="hamburgerMenuLinks" class="nav-links space-y-2" role="menu">
          <a href="presenze.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-800" role="menuitem">Presenze</a>
          <a href="esploratori.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-800" role="menuitem">Esploratori</a>
          <a href="calendario.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-800" role="menuitem">Calendario</a>
          <a href="staff.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-800" role="menuitem">Staff</a>
          <a href="dashboard.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-800" role="menuitem">Dashboard</a>
          <a href="pagamenti.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-800" role="menuitem">Pagamenti</a>
          <a href="documenti.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-800" role="menuitem">Documenti</a>
          <a href="statistiche.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-800" role="menuitem">Statistiche</a>
          <a href="audit-logs.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-800" role="menuitem">Log Audit</a>
          <a href="preferenze.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-800" role="menuitem">âš™ï¸ Preferenze</a>
          <hr class="border-white/20 my-2" role="separator">
          <button type="button" id="logoutButton" class="tab-btn p-2 rounded-lg text-white hover:bg-red-600" style="display:none;" aria-label="Disconnetti dall'account">Logout</button>
        </div>
      </nav>
    </div>
  </header>
  
  <!-- Navigazione desktop -->
  <nav id="desktopNav" class="bg-green-600 p-2 hidden md:flex justify-center space-x-4" role="navigation" aria-label="Navigazione principale">
    <a href="presenze.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-700">Presenze</a>
    <a href="esploratori.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-700">Esploratori</a>
    <a href="calendario.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-700">Calendario</a>
    <a href="staff.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-700">Staff</a>
    <a href="dashboard.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-700">Dashboard</a>
    <a href="pagamenti.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-700">Pagamenti</a>
    <a href="documenti.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-700">Documenti</a>
    <a href="statistiche.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-700">Statistiche</a>
    <a href="audit-logs.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-700">Log Audit</a>
    <a href="preferenze.html" class="tab-btn p-2 rounded-lg text-white hover:bg-green-700">âš™ï¸ Preferenze</a>
  </nav>