<!-- Skip Links per accessibilitÃ  -->
<a href="#main-content" class="skip-link">Salta al contenuto principale</a>

<!-- Header Minimale -->
<header class="bg-green-700 text-white p-3 rounded-t-xl flex justify-between items-center sticky top-0 z-50 shadow-md"
  role="banner">
  <div class="flex items-center gap-3">
    <button id="sidebarToggle" class="p-2 hover:bg-green-800 rounded-lg transition-colors" aria-label="Toggle Sidebar">
      <span class="text-xl">â˜°</span>
    </button>
    <div class="flex flex-col">
      <h1 class="text-xl font-bold leading-tight">Reparto Maori</h1>
      <span id="current-page-label" class="text-green-200 text-xs font-medium">Dashboard</span>
    </div>
  </div>

  <div class="flex items-center gap-3">
    <!-- Notifiche In-App -->
    <div id="notificationsContainer" class="relative">
      <button id="notificationsBell"
        class="relative p-2 text-white hover:bg-green-800 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-white"
        aria-label="Notifiche" aria-expanded="false" aria-haspopup="true">
        <span class="text-xl">ğŸ””</span>
        <span id="notificationsBadge"
          class="absolute top-0 right-0 bg-red-600 text-white text-[10px] rounded-full w-4 h-4 flex items-center justify-center font-bold"
          style="display: none;">0</span>
      </button>
      <div id="notificationsDropdown"
        class="absolute right-0 mt-2 w-72 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50 max-h-96 overflow-y-auto hidden"
        role="menu">
        <div
          class="p-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center sticky top-0 bg-white dark:bg-gray-800 z-10">
          <h3 class="font-semibold text-gray-700 dark:text-gray-300">Notifiche</h3>
          <button id="markAllReadBtn" class="text-xs text-blue-600 dark:text-blue-400 hover:underline">Segna tutte
            lette</button>
        </div>
        <div id="notificationsList" class="divide-y divide-gray-100 dark:divide-gray-700">
          <!-- Notifiche verranno inserite qui dinamicamente -->
        </div>
        <div id="notificationsEmpty" class="p-6 text-center text-gray-500 dark:text-gray-400 text-sm">
          Nessuna notifica
        </div>
      </div>
    </div>

    <button id="themeToggle" class="p-2 hover:bg-green-800 rounded-lg transition-colors" title="Cambia tema">
      <span class="theme-toggle-icon">ğŸŒ™</span>
    </button>

    <div id="staff-info-minimal" class="hidden sm:flex flex-col text-right">
      <span id="selectedStaffName" class="font-semibold text-sm">Nessuno</span>
      <span id="loggedInUserEmail" class="text-green-200 text-[10px] opacity-80"></span>
    </div>
  </div>
</header>

<!-- Sidebar Overlay (Mobile) -->
<div id="sidebarOverlay" class="fixed inset-0 bg-black/50 z-40 hidden md:hidden"></div>

<!-- Sidebar Navigazione -->
<aside id="mainSidebar"
  class="fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-900 shadow-2xl z-50 transform -translate-x-full transition-all duration-300 ease-in-out active"
  aria-label="Navigazione principale">
  <div class="flex flex-col h-full">
    <!-- Sidebar Header (Mobile Only) -->
    <div class="p-4 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center md:hidden">
      <span class="font-bold text-green-700 dark:text-green-500">Menu</span>
      <button id="closeSidebar" class="p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg">âœ•</button>
    </div>

    <!-- Sezioni Menu -->
    <nav class="flex-1 overflow-y-auto p-4 space-y-6 scrollbar-thin">
      <!-- 1. Persone -->
      <div>
        <h3 class="px-3 text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2">Persone
        </h3>
        <div class="space-y-1">
          <a href="esploratori.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ‘¥</span> Esploratori
          </a>
          <a href="staff.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ‘”</span> Staff
          </a>
          <a href="archivio.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ—‚ï¸</span> Archivio
          </a>
        </div>
      </div>

      <!-- 2. Calendario -->
      <div>
        <h3 class="px-3 text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2">
          Calendario</h3>
        <div class="space-y-1">
          <a href="presenze.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>âœ…</span> Presenze
          </a>
          <a href="calendario.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ“…</span> Eventi
          </a>
        </div>
      </div>

      <!-- 3. Gestione -->
      <div>
        <h3 class="px-3 text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2">Gestione
        </h3>
        <div class="space-y-1">
          <a href="pagamenti.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ’°</span> Pagamenti
          </a>
          <a href="documenti.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ“„</span> Documenti
          </a>
        </div>
      </div>

      <!-- 4. Dati -->
      <div>
        <h3 class="px-3 text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2">Dati</h3>
        <div class="space-y-1">
          <a href="dashboard.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ“Š</span> Dashboard
          </a>
          <a href="statistiche.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ“ˆ</span> Statistiche
          </a>
          <a href="liste.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ“‹</span> Liste
          </a>
        </div>
      </div>

      <!-- 5. UtilitÃ  -->
      <div>
        <h3 class="px-3 text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2">UtilitÃ 
        </h3>
        <div class="space-y-1">
          <a href="costotrasporti.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸšŒ</span> Costo Trasporti
          </a>
          <a href="costostruttura.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ </span> Costo Struttura
          </a>
          <a href="costocambusa.html"
            class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-400 transition-all">
            <span>ğŸ</span> Costo Cambusa
          </a>
        </div>
      </div>
    </nav>

    <!-- Footer Sidebar -->
    <div class="p-4 border-t border-gray-100 dark:border-gray-800 space-y-2">
      <a href="preferenze.html"
        class="nav-item flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-all">
        <span>âš™ï¸</span> Preferenze
      </a>
      <button id="logoutButton"
        class="w-full flex items-center gap-3 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all"
        style="display:none;">
        <span>ğŸšª</span> Logout
      </button>
    </div>
  </div>
</aside>